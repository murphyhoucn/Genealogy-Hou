# YAML批量导入功能说明

## 📁 数据目录
项目包含 `data/` 目录，用于存放YAML格式的家族成员数据文件。

## 🔧 功能特性

### 1. 单文件导入
- 支持上传单个YAML文件
- 实时预览导入数据
- 支持数据验证和错误提示

### 2. 批量文件导入  
- 支持同时选择多个YAML文件
- 批量处理所有文件
- 逐个文件处理，显示详细错误信息

### 3. 模板下载
- 提供Excel模板下载
- 提供YAML模板下载
- 包含完整的字段说明

## 📝 YAML文件格式

```yaml
# 族谱数据YAML格式
- id: G20-example1                # 唯一标识符（必填，格式：G{世代}-{标识符}）
  name: "侯某某"                  # 姓名（必填）
  gender: "男"                    # 性别（"男" 或 "女"）
  generation: 20                  # 世代数
  rank: 1                         # 在兄弟姐妹中的排行
  father_id: G19-father1          # 父亲的ID（需要对应现有成员的ID）
  birth_date: "1990-01-01"        # 生日（YYYY-MM-DD 或 YYYY格式）
  is_alive: true                  # 是否在世（true 或 false）
  bio_str: "字某某，生平事迹"       # 生平事迹/备注
  official_position: "进士"        # 官职（可选）
  spouse: "王氏"                  # 配偶姓名（可选）
  residence_place: "某地"          # 居住地（可选）
```

## 🗂️ 示例文件

项目已包含两个示例YAML文件：
- `data/batch-1.yaml` - 第一批家族成员数据
- `data/batch-2.yaml` - 第二批家族成员数据
- `data/family-data-sample.yaml` - 格式示例文件

## 🚀 使用方法

### 方法一：单文件导入
1. 点击 **"批量导入"** 按钮
2. 选择一个YAML文件上传
3. 系统自动解析并显示数据预览
4. 确认无误后点击"导入"

### 方法二：批量文件导入
1. 点击 **"批量YAML导入"** 按钮
2. 选择多个YAML文件
3. 可选择单个文件预览数据
4. 点击"批量导入所有文件"一次性处理

### 方法三：模板方式
1. 下载YAML模板文件
2. 按照格式填写家族成员数据
3. 保存为 `.yaml` 或 `.yml` 文件
4. 使用导入功能上传

## ⚠️ 注意事项

1. **文件格式**：仅支持 `.yaml` 和 `.yml` 文件
2. **数据结构**：必须包含 `members` 数组
3. **必填字段**：`name`（姓名）为必填字段
4. **权限要求**：需要登录后才能使用导入功能
5. **数据验证**：导入前会进行格式和数据有效性检查

## 🎯 字段说明

| 字段名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | string | ✅ | 唯一标识符，格式：G{世代}-{标识符} |
| name | string | ✅ | 姓名 |
| gender | string | ❌ | 性别，限制为"男"或"女" |
| generation | number | ❌ | 世代数 |
| rank | number | ❌ | 在兄弟姐妹中的排行 |
| father_id | string | ❌ | 父亲的ID（需要对应现有成员的ID） |
| birth_date | string | ❌ | 生日，格式：YYYY-MM-DD 或 YYYY |
| is_alive | boolean | ❌ | 是否在世 |
| bio_str | string | ❌ | 生平事迹或备注 |
| official_position | string | ❌ | 官职或职业 |
| spouse | string | ❌ | 配偶姓名 |
| residence_place | string | ❌ | 居住地 |

## 🔍 错误处理

系统会对以下情况进行检查和提示：
- YAML语法错误
- 缺少必需的数据结构
- 字段类型不匹配
- 重复数据导入
- 网络连接问题

导入过程中如有错误，系统会显示详细的错误信息，帮助用户快速定位和解决问题。